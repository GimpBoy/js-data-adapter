{"version":3,"file":"js-data-adapter.js","sources":["../src/index.js"],"sourcesContent":["import {utils} from 'js-data'\n\nconst {\n  addHiddenPropsToTarget,\n  extend,\n  fillIn,\n  forEachRelation,\n  get,\n  isArray,\n  isObject,\n  isUndefined,\n  omit,\n  plainCopy,\n  resolve\n} = utils\n\nconst noop = function (...args) {\n  const self = this\n  const opts = args[args.length - 1]\n  self.dbg(opts.op, ...args)\n  return resolve()\n}\n\nconst noop2 = function (...args) {\n  const self = this\n  const opts = args[args.length - 2]\n  self.dbg(opts.op, ...args)\n  return resolve()\n}\n\nconst unique = function (array) {\n  const seen = {}\n  const final = []\n  array.forEach(function (item) {\n    if (item in seen) {\n      return\n    }\n    final.push(item)\n    seen[item] = 0\n  })\n  return final\n}\n\nconst withoutRelations = function (mapper, props) {\n  return omit(props, mapper.relationFields || [])\n}\n\nconst DEFAULTS = {\n  /**\n   * Whether to log debugging information.\n   *\n   * @name Adapter#debug\n   * @type {boolean}\n   * @default false\n   */\n  debug: false,\n\n  /**\n   * Whether to return a more detailed response object.\n   *\n   * @name Adapter#raw\n   * @type {boolean}\n   * @default false\n   */\n  raw: false\n}\n\n/**\n * Abstract class meant to be extended by adapters.\n *\n * @class Adapter\n * @abstract\n * @param {Object} [opts] Configuration opts.\n * @param {boolean} [opts.debug=false] Whether to log debugging information.\n * @param {boolean} [opts.raw=false] Whether to return a more detailed response\n * object.\n */\nfunction Adapter (opts) {\n  const self = this\n  opts || (opts = {})\n  fillIn(opts, DEFAULTS)\n  fillIn(self, opts)\n}\n\nAdapter.reserved = [\n  'orderBy',\n  'sort',\n  'limit',\n  'offset',\n  'skip',\n  'where'\n]\n\n/**\n * Response object used when `raw` is `true`. May contain other fields in\n * addition to `data`.\n *\n * @typedef {Object} Response\n * @property {Object} data Response data.\n * @property {string} op The operation for which the response was created.\n */\nfunction Response (data, meta, op) {\n  const self = this\n  meta || (meta = {})\n  self.data = data\n  fillIn(self, meta)\n  self.op = op\n}\n\nAdapter.Response = Response\n\n/**\n * Alternative to ES6 class syntax for extending `Adapter`.\n *\n * @name Adapter.extend\n * @method\n * @param {Object} [instanceProps] Properties that will be added to the\n * prototype of the subclass.\n * @param {Object} [classProps] Properties that will be added as static\n * properties to the subclass itself.\n * @return {Object} Subclass of `Adapter`.\n */\nAdapter.extend = extend\n\naddHiddenPropsToTarget(Adapter.prototype, {\n  /**\n   * Lifecycle method method called by <a href=\"#create__anchor\">create</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#create__anchor\">create</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the created record.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#create__anchor\">create</a>.\n   *\n   * @name Adapter#afterCreate\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#create__anchor\">create</a>.\n   * @param {Object} props The `props` argument passed to <a href=\"#create__anchor\">create</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#create__anchor\">create</a>.\n   * @property {string} opts.op `afterCreate`\n   * @param {Object|Response} response Created record or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterCreate: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#createMany__anchor\">createMany</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#createMany__anchor\">createMany</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the created records.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#createMany__anchor\">createMany</a>.\n   *\n   * @name Adapter#afterCreate\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#createMany__anchor\">createMany</a>.\n   * @param {Object[]} props The `props` argument passed to <a href=\"#createMany__anchor\">createMany</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#createMany__anchor\">createMany</a>.\n   * @property {string} opts.op `afterCreateMany`\n   * @param {Object[]|Response} response Created records or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterCreateMany: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#destroy__anchor\">destroy</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#destroy__anchor\">destroy</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be `undefined`.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#destroy__anchor\">destroy</a>.\n   *\n   * @name Adapter#afterDestroy\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#destroy__anchor\">destroy</a>.\n   * @param {(string|number)} id The `id` argument passed to <a href=\"#destroy__anchor\">destroy</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#destroy__anchor\">destroy</a>.\n   * @property {string} opts.op `afterDestroy`\n   * @param {undefined|Response} response `undefined` or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterDestroy: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#destroyAll__anchor\">destroyAll</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be `undefined`.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   *\n   * @name Adapter#afterDestroyAll\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   * @param {Object} query The `query` argument passed to <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   * @property {string} opts.op `afterDestroyAll`\n   * @param {undefined|Response} response `undefined` or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterDestroyAll: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#find__anchor\">find</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#find__anchor\">find</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the found record, if any.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#find__anchor\">find</a>.\n   *\n   * @name Adapter#afterFind\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#find__anchor\">find</a>.\n   * @param {(string|number)} id The `id` argument passed to <a href=\"#find__anchor\">find</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#find__anchor\">find</a>.\n   * @property {string} opts.op `afterFind`\n   * @param {Object|Response} response The found record or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterFind: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#findAll__anchor\">findAll</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#findAll__anchor\">findAll</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the found records, if any.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#findAll__anchor\">findAll</a>.\n   *\n   * @name Adapter#afterFindAll\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#findAll__anchor\">findAll</a>.\n   * @param {Object} query The `query` argument passed to <a href=\"#findAll__anchor\">findAll</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#findAll__anchor\">findAll</a>.\n   * @property {string} opts.op `afterFindAll`\n   * @param {Object[]|Response} response The found records or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterFindAll: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#update__anchor\">update</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#update__anchor\">update</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the updated record.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#update__anchor\">update</a>.\n   *\n   * @name Adapter#afterUpdate\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @param {(string|number)} id The `id` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @param {Object} props The `props` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @property {string} opts.op `afterUpdate`\n   * @param {Object|Response} response The updated record or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterUpdate: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#updateAll__anchor\">updateAll</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#updateAll__anchor\">updateAll</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the updated records, if any.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#updateAll__anchor\">updateAll</a>.\n   *\n   * @name Adapter#afterUpdateAll\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @param {Object} props The `props` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @param {Object} query The `query` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @property {string} opts.op `afterUpdateAll`\n   * @param {Object[]|Response} response The updated records or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterUpdateAll: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#updateMany__anchor\">updateMany</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#updateMany__anchor\">updateMany</a> to wait for the Promise to resolve before continuing.\n   *\n   * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the updated records, if any.\n   *\n   * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#updateMany__anchor\">updateMany</a>.\n   *\n   * @name Adapter#afterUpdateMany\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#updateMany__anchor\">updateMany</a>.\n   * @param {Object[]} records The `records` argument passed to <a href=\"#updateMany__anchor\">updateMany</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#updateMany__anchor\">updateMany</a>.\n   * @property {string} opts.op `afterUpdateMany`\n   * @param {Object[]|Response} response The updated records or {@link Response}, depending on the value of `opts.raw`.\n   */\n  afterUpdateMany: noop2,\n\n  /**\n   * Lifecycle method method called by <a href=\"#create__anchor\">create</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#create__anchor\">create</a> to wait for the Promise to resolve before continuing.\n   *\n   * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#create__anchor\">create</a>.\n   *\n   * @name Adapter#beforeCreate\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#create__anchor\">create</a>.\n   * @param {Object} props The `props` argument passed to <a href=\"#create__anchor\">create</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#create__anchor\">create</a>.\n   * @property {string} opts.op `beforeCreate`\n   */\n  beforeCreate: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#createMany__anchor\">createMany</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#createMany__anchor\">createMany</a> to wait for the Promise to resolve before continuing.\n   *\n   * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#createMany__anchor\">createMany</a>.\n   *\n   * @name Adapter#beforeCreateMany\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#createMany__anchor\">createMany</a>.\n   * @param {Object[]} props The `props` argument passed to <a href=\"#createMany__anchor\">createMany</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#createMany__anchor\">createMany</a>.\n   * @property {string} opts.op `beforeCreateMany`\n   */\n  beforeCreateMany: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#destroy__anchor\">destroy</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#destroy__anchor\">destroy</a> to wait for the Promise to resolve before continuing.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#destroy__anchor\">destroy</a>.\n   *\n   * @name Adapter#beforeDestroy\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#destroy__anchor\">destroy</a>.\n   * @param {(string|number)} id The `id` argument passed to <a href=\"#destroy__anchor\">destroy</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#destroy__anchor\">destroy</a>.\n   * @property {string} opts.op `beforeDestroy`\n   */\n  beforeDestroy: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#destroyAll__anchor\">destroyAll</a> to wait for the Promise to resolve before continuing.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   *\n   * @name Adapter#beforeDestroyAll\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   * @param {Object} query The `query` argument passed to <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#destroyAll__anchor\">destroyAll</a>.\n   * @property {string} opts.op `beforeDestroyAll`\n   */\n  beforeDestroyAll: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#find__anchor\">find</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#find__anchor\">find</a> to wait for the Promise to resolve before continuing.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#find__anchor\">find</a>.\n   *\n   * @name Adapter#beforeFind\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#find__anchor\">find</a>.\n   * @param {(string|number)} id The `id` argument passed to <a href=\"#find__anchor\">find</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#find__anchor\">find</a>.\n   * @property {string} opts.op `beforeFind`\n   */\n  beforeFind: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#findAll__anchor\">findAll</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#findAll__anchor\">findAll</a> to wait for the Promise to resolve before continuing.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#findAll__anchor\">findAll</a>.\n   *\n   * @name Adapter#beforeFindAll\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#findAll__anchor\">findAll</a>.\n   * @param {Object} query The `query` argument passed to <a href=\"#findAll__anchor\">findAll</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#findAll__anchor\">findAll</a>.\n   * @property {string} opts.op `beforeFindAll`\n   */\n  beforeFindAll: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#update__anchor\">update</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#update__anchor\">update</a> to wait for the Promise to resolve before continuing.\n   *\n   * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#update__anchor\">update</a>.\n   *\n   * @name Adapter#beforeUpdate\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @param {(string|number)} id The `id` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @param {Object} props The `props` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#update__anchor\">update</a>.\n   * @property {string} opts.op `beforeUpdate`\n   */\n  beforeUpdate: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#updateAll__anchor\">updateAll</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#updateAll__anchor\">updateAll</a> to wait for the Promise to resolve before continuing.\n   *\n   * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#updateAll__anchor\">updateAll</a>.\n   *\n   * @name Adapter#beforeUpdateAll\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @param {Object} props The `props` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @param {Object} query The `query` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#updateAll__anchor\">updateAll</a>.\n   * @property {string} opts.op `beforeUpdateAll`\n   */\n  beforeUpdateAll: noop,\n\n  /**\n   * Lifecycle method method called by <a href=\"#updateMany__anchor\">updateMany</a>.\n   *\n   * Override this method to add custom behavior for this lifecycle hook.\n   *\n   * Returning a Promise causes <a href=\"#updateMany__anchor\">updateMany</a> to wait for the Promise to resolve before continuing.\n   *\n   * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value.\n   *\n   * A thrown error or rejected Promise will bubble up and reject the Promise returned by <a href=\"#updateMany__anchor\">updateMany</a>.\n   *\n   * @name Adapter#beforeUpdateMany\n   * @method\n   * @param {Object} mapper The `mapper` argument passed to <a href=\"#updateMany__anchor\">updateMany</a>.\n   * @param {Object[]} props The `props` argument passed to <a href=\"#updateMany__anchor\">updateMany</a>.\n   * @param {Object} opts The `opts` argument passed to <a href=\"#updateMany__anchor\">updateMany</a>.\n   * @property {string} opts.op `beforeUpdateMany`\n   */\n  beforeUpdateMany: noop,\n\n  /**\n   * Shortcut for `#log('debug'[, arg1[, arg2[, argn]]])`.\n   *\n   * @name Adapter#dbg\n   * @method\n   */\n  dbg (...args) {\n    this.log('debug', ...args)\n  },\n\n  /**\n   * Create a new record. Called by `Mapper#create`.\n   *\n   * @name Adapter#create\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} props The record to be created.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  create (mapper, props, opts) {\n    const self = this\n    let op\n    props || (props = {})\n    opts || (opts = {})\n\n    // beforeCreate lifecycle hook\n    op = opts.op = 'beforeCreate'\n    return resolve(self[op](mapper, props, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = isUndefined(_props) ? props : _props\n      props = withoutRelations(mapper, props)\n      op = opts.op = 'create'\n      self.dbg(op, mapper, props, opts)\n      return resolve(self._create(mapper, props, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      result || (result = {})\n      let response = new Response(data, result, 'create')\n      response.created = data ? 1 : 0\n      response = self.respond(response, opts)\n\n      // afterCreate lifecycle hook\n      op = opts.op = 'afterCreate'\n      return resolve(self[op](mapper, props, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Create multiple records in a single batch. Called by `Mapper#createMany`.\n   *\n   * @name Adapter#createMany\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} props The records to be created.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  createMany (mapper, props, opts) {\n    const self = this\n    let op\n    props || (props = {})\n    opts || (opts = {})\n\n    // beforeCreateMany lifecycle hook\n    op = opts.op = 'beforeCreateMany'\n    return resolve(self[op](mapper, props, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = isUndefined(_props) ? props : _props\n      props = props.map(function (record) {\n        return withoutRelations(mapper, record)\n      })\n      op = opts.op = 'createMany'\n      self.dbg(op, mapper, props, opts)\n      return resolve(self._createMany(mapper, props, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      data || (data = [])\n      result || (result = {})\n      let response = new Response(data, result, 'createMany')\n      response.created = data.length\n      response = self.respond(response, opts)\n\n      // afterCreateMany lifecycle hook\n      op = opts.op = 'afterCreateMany'\n      return resolve(self[op](mapper, props, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Destroy the record with the given primary key. Called by\n   * `Mapper#destroy`.\n   *\n   * @name Adapter#destroy\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {(string|number)} id Primary key of the record to destroy.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  destroy (mapper, id, opts) {\n    const self = this\n    let op\n    opts || (opts = {})\n\n    // beforeDestroy lifecycle hook\n    op = opts.op = 'beforeDestroy'\n    return resolve(self[op](mapper, id, opts)).then(function () {\n      op = opts.op = 'destroy'\n      self.dbg(op, mapper, id, opts)\n      return resolve(self._destroy(mapper, id, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      result || (result = {})\n      let response = new Response(data, result, 'destroy')\n      response = self.respond(response, opts)\n\n      // afterDestroy lifecycle hook\n      op = opts.op = 'afterDestroy'\n      return resolve(self[op](mapper, id, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Destroy the records that match the selection query. Called by\n   * `Mapper#destroyAll`.\n   *\n   * @name Adapter#destroyAll\n   * @method\n   * @param {Object} mapper the mapper.\n   * @param {Object} [query] Selection query.\n   * @param {Object} [query.where] Filtering criteria.\n   * @param {string|Array} [query.orderBy] Sorting criteria.\n   * @param {string|Array} [query.sort] Same as `query.sort`.\n   * @param {number} [query.limit] Limit results.\n   * @param {number} [query.skip] Offset results.\n   * @param {number} [query.offset] Same as `query.skip`.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  destroyAll (mapper, query, opts) {\n    const self = this\n    let op\n    query || (query = {})\n    opts || (opts = {})\n\n    // beforeDestroyAll lifecycle hook\n    op = opts.op = 'beforeDestroyAll'\n    return resolve(self[op](mapper, query, opts)).then(function () {\n      op = opts.op = 'destroyAll'\n      self.dbg(op, mapper, query, opts)\n      return resolve(self._destroyAll(mapper, query, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      result || (result = {})\n      let response = new Response(data, result, 'destroyAll')\n      response = self.respond(response, opts)\n\n      // afterDestroyAll lifecycle hook\n      op = opts.op = 'afterDestroyAll'\n      return resolve(self[op](mapper, query, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Return the foreignKey from the given record for the provided relationship.\n   *\n   * There may be reasons why you may want to override this method, like when\n   * the id of the parent doesn't exactly match up to the key on the child.\n   *\n   * Override with care.\n   *\n   * @name Adapter#makeHasManyForeignKey\n   * @method\n   * @return {*}\n   */\n  makeHasManyForeignKey (mapper, def, record) {\n    return def.getForeignKey(record)\n  },\n\n  /**\n   * Return the foreignKeys from the given record for the provided relationship.\n   *\n   * Override with care.\n   *\n   * @name Adapter#makeHasManyForeignKeys\n   * @method\n   * @return {*}\n   */\n  makeHasManyForeignKeys (mapper, def, record) {\n    return get(record, mapper.idAttribute)\n  },\n\n  /**\n   * Load a hasMany relationship.\n   *\n   * Override with care.\n   *\n   * @name Adapter#loadHasMany\n   * @method\n   * @return {Promise}\n   */\n  loadHasMany (mapper, def, records, __opts) {\n    const self = this\n    let singular = false\n\n    if (isObject(records) && !isArray(records)) {\n      singular = true\n      records = [records]\n    }\n    const IDs = records.map(function (record) {\n      return self.makeHasManyForeignKey(mapper, def, record)\n    })\n    const query = {\n      where: {}\n    }\n    const criteria = query.where[def.foreignKey] = {}\n    if (singular) {\n      // more efficient query when we only have one record\n      criteria['=='] = IDs[0]\n    } else {\n      criteria['in'] = IDs.filter(function (id) {\n        return id\n      })\n    }\n    return self.findAll(def.getRelation(), query, __opts).then(function (relatedItems) {\n      records.forEach(function (record) {\n        let attached = []\n        // avoid unneccesary iteration when we only have one record\n        if (singular) {\n          attached = relatedItems\n        } else {\n          relatedItems.forEach(function (relatedItem) {\n            if (get(relatedItem, def.foreignKey) === record[mapper.idAttribute]) {\n              attached.push(relatedItem)\n            }\n          })\n        }\n        def.setLocalField(record, attached)\n      })\n    })\n  },\n\n  loadHasManyLocalKeys (mapper, def, records, __opts) {\n    const self = this\n    let record\n    const relatedMapper = def.getRelation()\n\n    if (isObject(records) && !isArray(records)) {\n      record = records\n    }\n\n    if (record) {\n      let localKeys = []\n      let itemKeys = get(record, def.localKeys) || []\n      itemKeys = isArray(itemKeys) ? itemKeys : Object.keys(itemKeys)\n      localKeys = localKeys.concat(itemKeys)\n      return self.findAll(relatedMapper, {\n        where: {\n          [relatedMapper.idAttribute]: {\n            'in': unique(localKeys).filter(function (x) { return x })\n          }\n        }\n      }, __opts).then(function (relatedItems) {\n        def.setLocalField(record, relatedItems)\n      })\n    } else {\n      let localKeys = []\n      records.forEach(function (item) {\n        let itemKeys = item[def.localKeys] || []\n        itemKeys = isArray(itemKeys) ? itemKeys : Object.keys(itemKeys)\n        localKeys = localKeys.concat(itemKeys)\n      })\n      return self.findAll(relatedMapper, {\n        where: {\n          [relatedMapper.idAttribute]: {\n            'in': unique(localKeys).filter(function (x) { return x })\n          }\n        }\n      }, __opts).then(function (relatedItems) {\n        records.forEach(function (item) {\n          let attached = []\n          let itemKeys = get(item, def.localKeys) || []\n          itemKeys = isArray(itemKeys) ? itemKeys : Object.keys(itemKeys)\n          relatedItems.forEach(function (relatedItem) {\n            if (itemKeys && itemKeys.indexOf(relatedItem[relatedMapper.idAttribute]) !== -1) {\n              attached.push(relatedItem)\n            }\n          })\n          def.setLocalField(item, attached)\n        })\n        return relatedItems\n      })\n    }\n  },\n\n  loadHasManyForeignKeys (mapper, def, records, __opts) {\n    const self = this\n    const relatedMapper = def.getRelation()\n    const idAttribute = mapper.idAttribute\n    let record\n\n    if (isObject(records) && !isArray(records)) {\n      record = records\n    }\n\n    if (record) {\n      return self.findAll(def.getRelation(), {\n        where: {\n          [def.foreignKeys]: {\n            'contains': self.makeHasManyForeignKeys(mapper, def, record)\n          }\n        }\n      }, __opts).then(function (relatedItems) {\n        def.setLocalField(record, relatedItems)\n      })\n    } else {\n      return self.findAll(relatedMapper, {\n        where: {\n          [def.foreignKeys]: {\n            'isectNotEmpty': records.map(function (record) {\n              return self.makeHasManyForeignKeys(mapper, def, record)\n            })\n          }\n        }\n      }, __opts).then(function (relatedItems) {\n        const foreignKeysField = def.foreignKeys\n        records.forEach(function (record) {\n          const _relatedItems = []\n          const id = get(record, idAttribute)\n          relatedItems.forEach(function (relatedItem) {\n            const foreignKeys = get(relatedItems, foreignKeysField) || []\n            if (foreignKeys.indexOf(id) !== -1) {\n              _relatedItems.push(relatedItem)\n            }\n          })\n          def.setLocalField(record, _relatedItems)\n        })\n      })\n    }\n  },\n\n  /**\n   * Load a hasOne relationship.\n   *\n   * Override with care.\n   *\n   * @name Adapter#loadHasOne\n   * @method\n   * @return {Promise}\n   */\n  loadHasOne (mapper, def, records, __opts) {\n    if (isObject(records) && !isArray(records)) {\n      records = [records]\n    }\n    return this.loadHasMany(mapper, def, records, __opts).then(function () {\n      records.forEach(function (record) {\n        const relatedData = def.getLocalField(record)\n        if (isArray(relatedData) && relatedData.length) {\n          def.setLocalField(record, relatedData[0])\n        }\n      })\n    })\n  },\n\n  /**\n   * Return the foreignKey from the given record for the provided relationship.\n   *\n   * Override with care.\n   *\n   * @name Adapter#makeBelongsToForeignKey\n   * @method\n   * @return {*}\n   */\n  makeBelongsToForeignKey (mapper, def, record) {\n    return def.getForeignKey(record)\n  },\n\n  /**\n   * Load a belongsTo relationship.\n   *\n   * Override with care.\n   *\n   * @name Adapter#loadBelongsTo\n   * @method\n   * @return {Promise}\n   */\n  loadBelongsTo (mapper, def, records, __opts) {\n    const self = this\n    const relationDef = def.getRelation()\n\n    if (isObject(records) && !isArray(records)) {\n      const record = records\n      return self.find(relationDef, self.makeBelongsToForeignKey(mapper, def, record), __opts).then(function (relatedItem) {\n        def.setLocalField(record, relatedItem)\n      })\n    } else {\n      const keys = records.map(function (record) {\n        return self.makeBelongsToForeignKey(mapper, def, record)\n      }).filter(function (key) {\n        return key\n      })\n      return self.findAll(relationDef, {\n        where: {\n          [relationDef.idAttribute]: {\n            'in': keys\n          }\n        }\n      }, __opts).then(function (relatedItems) {\n        records.forEach(function (record) {\n          relatedItems.forEach(function (relatedItem) {\n            if (relatedItem[relationDef.idAttribute] === record[def.foreignKey]) {\n              def.setLocalField(record, relatedItem)\n            }\n          })\n        })\n      })\n    }\n  },\n\n  /**\n   * Retrieve the record with the given primary key. Called by `Mapper#find`.\n   *\n   * @name Adapter#find\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {(string|number)} id Primary key of the record to retrieve.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @param {string[]} [opts.with=[]] Relations to eager load.\n   * @return {Promise}\n   */\n  find (mapper, id, opts) {\n    const self = this\n    let record, op\n    opts || (opts = {})\n    opts.with || (opts.with = [])\n\n    // beforeFind lifecycle hook\n    op = opts.op = 'beforeFind'\n    return resolve(self[op](mapper, id, opts)).then(function () {\n      op = opts.op = 'find'\n      self.dbg(op, mapper, id, opts)\n      return resolve(self._find(mapper, id, opts))\n    }).then(function (results) {\n      let [_record] = results\n      if (!_record) {\n        return\n      }\n      record = _record\n      const tasks = []\n\n      forEachRelation(mapper, opts, function (def, __opts) {\n        let task\n        if (def.foreignKey && (def.type === 'hasOne' || def.type === 'hasMany')) {\n          if (def.type === 'hasOne') {\n            task = self.loadHasOne(mapper, def, record, __opts)\n          } else {\n            task = self.loadHasMany(mapper, def, record, __opts)\n          }\n        } else if (def.type === 'hasMany' && def.localKeys) {\n          task = self.loadHasManyLocalKeys(mapper, def, record, __opts)\n        } else if (def.type === 'hasMany' && def.foreignKeys) {\n          task = self.loadHasManyForeignKeys(mapper, def, record, __opts)\n        } else if (def.type === 'belongsTo') {\n          task = self.loadBelongsTo(mapper, def, record, __opts)\n        }\n        if (task) {\n          tasks.push(task)\n        }\n      })\n\n      return Promise.all(tasks)\n    }).then(function () {\n      let response = new Response(record, {}, 'find')\n      response.found = record ? 1 : 0\n      response = self.respond(response, opts)\n\n      // afterFind lifecycle hook\n      op = opts.op = 'afterFind'\n      return resolve(self[op](mapper, id, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Retrieve the records that match the selection query.\n   *\n   * @name Adapter#findAll\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} [query] Selection query.\n   * @param {Object} [query.where] Filtering criteria.\n   * @param {string|Array} [query.orderBy] Sorting criteria.\n   * @param {string|Array} [query.sort] Same as `query.sort`.\n   * @param {number} [query.limit] Limit results.\n   * @param {number} [query.skip] Offset results.\n   * @param {number} [query.offset] Same as `query.skip`.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @param {string[]} [opts.with=[]] Relations to eager load.\n   * @return {Promise}\n   */\n  findAll (mapper, query, opts) {\n    const self = this\n    opts || (opts = {})\n    opts.with || (opts.with = [])\n\n    let records = []\n    let op\n    // beforeFindAll lifecycle hook\n    op = opts.op = 'beforeFindAll'\n    return resolve(self[op](mapper, query, opts)).then(function () {\n      op = opts.op = 'findAll'\n      self.dbg(op, mapper, query, opts)\n      return resolve(self._findAll(mapper, query, opts))\n    }).then(function (results) {\n      let [_records] = results\n      _records || (_records = [])\n      records = _records\n      const tasks = []\n      forEachRelation(mapper, opts, function (def, __opts) {\n        let task\n        if (def.foreignKey && (def.type === 'hasOne' || def.type === 'hasMany')) {\n          if (def.type === 'hasMany') {\n            task = self.loadHasMany(mapper, def, records, __opts)\n          } else {\n            task = self.loadHasOne(mapper, def, records, __opts)\n          }\n        } else if (def.type === 'hasMany' && def.localKeys) {\n          task = self.loadHasManyLocalKeys(mapper, def, records, __opts)\n        } else if (def.type === 'hasMany' && def.foreignKeys) {\n          task = self.loadHasManyForeignKeys(mapper, def, records, __opts)\n        } else if (def.type === 'belongsTo') {\n          task = self.loadBelongsTo(mapper, def, records, __opts)\n        }\n        if (task) {\n          tasks.push(task)\n        }\n      })\n      return Promise.all(tasks)\n    }).then(function () {\n      let response = new Response(records, {}, 'findAll')\n      response.found = records.length\n      response = self.respond(response, opts)\n\n      // afterFindAll lifecycle hook\n      op = opts.op = 'afterFindAll'\n      return resolve(self[op](mapper, query, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Resolve the value of the specified option based on the given options and\n   * this adapter's settings. Override with care.\n   *\n   * @name Adapter#getOpt\n   * @method\n   * @param {string} opt The name of the option.\n   * @param {Object} [opts] Configuration options.\n   * @return {*} The value of the specified option.\n   */\n  getOpt (opt, opts) {\n    opts || (opts = {})\n    return isUndefined(opts[opt]) ? plainCopy(this[opt]) : plainCopy(opts[opt])\n  },\n\n  /**\n   * Logging utility method. Override this method if you want to send log\n   * messages to something other than the console.\n   *\n   * @name Adapter#log\n   * @method\n   * @param {string} level Log level.\n   * @param {...*} values Values to log.\n   */\n  log (level, ...args) {\n    if (level && !args.length) {\n      args.push(level)\n      level = 'debug'\n    }\n    if (level === 'debug' && !this.debug) {\n      return\n    }\n    const prefix = `${level.toUpperCase()}: (Adapter)`\n    if (console[level]) {\n      console[level](prefix, ...args)\n    } else {\n      console.log(prefix, ...args)\n    }\n  },\n\n  /**\n   * @name Adapter#respond\n   * @method\n   * @param {Object} response Response object.\n   * @param {Object} opts Configuration options.\n   * return {Object} If `opts.raw == true` then return `response`, else return\n   * `response.data`.\n   */\n  respond (response, opts) {\n    return this.getOpt('raw', opts) ? response : response.data\n  },\n\n  /**\n   * Apply the given update to the record with the specified primary key. Called\n   * by `Mapper#update`.\n   *\n   * @name Adapter#update\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {(string|number)} id The primary key of the record to be updated.\n   * @param {Object} props The update to apply to the record.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  update (mapper, id, props, opts) {\n    const self = this\n    props || (props = {})\n    opts || (opts = {})\n    let op\n\n    // beforeUpdate lifecycle hook\n    op = opts.op = 'beforeUpdate'\n    return resolve(self[op](mapper, id, props, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = isUndefined(_props) ? props : _props\n      op = opts.op = 'update'\n      self.dbg(op, mapper, id, props, opts)\n      return resolve(self._update(mapper, id, props, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      result || (result = {})\n      let response = new Response(data, result, 'update')\n      response.updated = data ? 1 : 0\n      response = self.respond(response, opts)\n\n      // afterUpdate lifecycle hook\n      op = opts.op = 'afterUpdate'\n      return resolve(self[op](mapper, id, props, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Apply the given update to all records that match the selection query.\n   * Called by `Mapper#updateAll`.\n   *\n   * @name Adapter#updateAll\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object} props The update to apply to the selected records.\n   * @param {Object} [query] Selection query.\n   * @param {Object} [query.where] Filtering criteria.\n   * @param {string|Array} [query.orderBy] Sorting criteria.\n   * @param {string|Array} [query.sort] Same as `query.sort`.\n   * @param {number} [query.limit] Limit results.\n   * @param {number} [query.skip] Offset results.\n   * @param {number} [query.offset] Same as `query.skip`.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  updateAll (mapper, props, query, opts) {\n    const self = this\n    props || (props = {})\n    query || (query = {})\n    opts || (opts = {})\n    let op\n\n    // beforeUpdateAll lifecycle hook\n    op = opts.op = 'beforeUpdateAll'\n    return resolve(self[op](mapper, props, query, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = isUndefined(_props) ? props : _props\n      op = opts.op = 'updateAll'\n      self.dbg(op, mapper, props, query, opts)\n      return resolve(self._updateAll(mapper, props, query, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      data || (data = [])\n      result || (result = {})\n      let response = new Response(data, result, 'updateAll')\n      response.updated = data.length\n      response = self.respond(response, opts)\n\n      // afterUpdateAll lifecycle hook\n      op = opts.op = 'afterUpdateAll'\n      return resolve(self[op](mapper, props, query, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  },\n\n  /**\n   * Update the given records in a single batch. Called by `Mapper#updateMany`.\n   *\n   * @name Adapter#updateMany\n   * @method\n   * @param {Object} mapper The mapper.\n   * @param {Object[]} records The records to update.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.raw=false] Whether to return a more detailed\n   * response object.\n   * @return {Promise}\n   */\n  updateMany (mapper, records, opts) {\n    const self = this\n    records || (records = [])\n    opts || (opts = {})\n    let op\n    const idAttribute = mapper.idAttribute\n\n    records = records.filter(function (record) {\n      return get(record, idAttribute)\n    })\n\n    // beforeUpdateMany lifecycle hook\n    op = opts.op = 'beforeUpdateMany'\n    return resolve(self[op](mapper, records, opts)).then(function (_records) {\n      // Allow for re-assignment from lifecycle hook\n      records = isUndefined(_records) ? records : _records\n      records = records.map(function (record) {\n        return withoutRelations(mapper, record)\n      })\n      op = opts.op = 'updateMany'\n      self.dbg(op, mapper, records, opts)\n      return resolve(self._updateMany(mapper, records, opts))\n    }).then(function (results) {\n      let [data, result] = results\n      data || (data = [])\n      result || (result = {})\n      let response = new Response(data, result, 'updateMany')\n      response.updated = data.length\n      response = self.respond(response, opts)\n\n      // afterUpdateMany lifecycle hook\n      op = opts.op = 'afterUpdateMany'\n      return resolve(self[op](mapper, records, opts, response)).then(function (_response) {\n        // Allow for re-assignment from lifecycle hook\n        return isUndefined(_response) ? response : _response\n      })\n    })\n  }\n})\n\nmodule.exports = Adapter\n"],"names":["utils"],"mappings":"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"}